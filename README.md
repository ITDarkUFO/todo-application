# Тестовое задание ToDo App
## Описание
Создать веб-приложение для управления списком задач (ToDo list). Предоставить Web API для создания, просмотра, редактирования и удаления задач, а также управление связанными данными
## Используемый стек
 - Visual Studio
 - ASP.NET Core 8.0
 - user-secrets (на время разработки)
 - Entity Framework 8.0
 - PostgreSQL 8.2
 - Docker
 - Изображения из [Freepik](https://www.freepik.com/)

## Начальная настройка 
Запуск можно проводить как через Visual Studio, так и через Docker, но перед первым запуском необходимо выполнить несколько действий по настройке:

 1. Разверните базу данных для проекта в PostgreSQL
 2. Зайдите через консоль в папку ***\Application***
 3. Добавьте в user-secrets адрес и данные входа в базу данных с помощью команды
`dotnet user-secrets set "ConnectionStrings:Default" "Server=адрес; Database=имя-бд; Username=логин; Password=пароль;"`
 4. Установите dotnet с помощью команды
`dotnet tool install --global dotnet-ef`
 5. Установите пакет EFCore Design с помощью команды
`dotnet add package Microsoft.EntityFrameworkCore.Design`
 6. Проверьте, что команда `dotnet ef` выполняется без ошибок
 7. Обновите базу данных с помощью команды `dotnet ef database update`

# Страницы приложения
## Главная страница
После запуска приложения в браузере должен появиться начальный экран.
![Главная страница](https://github.com/ITDarkUFO/todo-list_test-assignment/blob/readme/img/home-page.png?raw=true)
Войти в систему можно либо с помощью аккаунта админа `admin - admin`, либо зарегистрировать свой.
![Главная страница после входа](https://github.com/ITDarkUFO/todo-list_test-assignment/blob/readme/img/home-page-loggedin.png?raw=true)
В дальнейшем будет иметься ввиду аккаунт админа, так как только он изначально имеет доступ к панели администрирования.
На главном экране отображаются задачи, назначенные на текущий день.
## Страница задач
На экране задач можно посмотреть все задачи пользователя, отфильтровать и отсортировать их по нужным критериям (на момент разработки, селекторы сбрасываются после обновления страницы).
![Страница задач](https://github.com/ITDarkUFO/todo-list_test-assignment/blob/readme/img/tasks-page.png?raw=true)
Также с этой страницы можно перейти на страницу добавления задач, а для существующих задач появляется возможность их подробного отображения, редактирования и удаления.
## Панель администрирования
В приложении есть панель администрирования, доступная по ссылке `/admin`.
![Панель администрирования](https://github.com/ITDarkUFO/todo-list_test-assignment/blob/readme/img/admin-page.png?raw=true)
С главной страницы панели можно перейти в разделы просмотра и редактирования приоритетов, задач и пользователей.
### Раздел «Приоритеты»
В разделе приоритетов отображается список добавленных приоритетов, а также количество задач с этим приоритетом. Есть возможность добавления, просмотра подробностей, редактирования и удаления.
### Раздел «Задачи»
В этом разделе отображаются задачи всех пользователей, а кроме фильтров и сортировок, как на странице задач в основной части приложения, есть фильтр задач по пользователю. Есть возможность добавления, просмотра задач, редактирования и удаления.
### Раздел «Пользователи»
В разделе пользователей отображаются все существующие пользователи приложения. Как и на остальных страницах, есть возможность добавления, просмотра, редактирования и удаления пользователей.
На странице добавления и редактирования пользователя можно назначить его администратором, чтобы он тоже мог просматривать панель администрирования.
# API приложения `/api`
Для всех действий на сайте существует аналог в виде запросов api. Все запросы к приложению начинаются со страницы `/api`, и в дальнейшем она не будет указываться для краткости. Во всех post-запросах параметры передаются через тело запроса, если не указано иное.

## Аккаунт `/account`
### Get-запросы
- `/` - позволяет пользователю, прошедшему авторизацию, получить данные о своем аккаунте, а также список своих задач.
### Post-запросы
- `/login` - позволяет войти в аккаунт пользователя.
Требует параметры `UserName : string` и `Password : string`. Опциональный параметр `RememberMe : bool`.

- `/register` - позволяет зарегистрировать нового пользователя в системе.
Требует параметры `UserName : string`, `Email : string`, `Password : string` и `ConfirmPassword : string`.
Возвращает данные о созданном пользователе.

- `/logout` - позволяет выйти из системы.

## Задачи `/tasks`
### Get-запросы
- `/` - позволяет получить список задач пользователя. При входе в аккаунт с правами администратора возвращается список задач всех пользователей.
Опциональные параметры `tasksSorter : TasksSorterEnum`, `taskStatusFilter : TaskStatusFilterEnum`, `taskPriorityFilter : int` и `userLoginFilter : string` (последний параметр доступен только администраторам).

- `/details` - позволяет получить информацию о задаче. Администраторы могут получить информацию о любой задаче в системе.
Требует параметр `id : int`.
### Post-запросы
- `/create` - позволяет создать новую задачу. Администраторы могут создать задачу для любого пользователя.
Требует параметры `task : Task`. Опциональный параметр адресной строки `dueTime : TimeOnly`.
Возвращает созданную задачу.

- `/edit` - позволяет отредактировать существующую задачу. Администраторы могут редактировать задачу любого пользователя. 
Требует параметр `task : Task`. Опциональный параметр адресной строки `dueTime : TimeOnly`.
Возвращает отредактированную задачу.

- `/delete` - позволяет удалить задачу. Администраторы могут удалять задачи любого пользователя.
Требует параметр `id : int`.
Возвращает удаленную задачу.

## Приоритеты `/priorities`
Раздел api доступен только администраторам.
### Get-запросы
- `/` - позволяет получить список приоритетов с назначенными на них задачами.

- `/details` - позволяет получить информацию о приоритете.
Требует параметр `id : int`.
### Post-запросы
- `/create` - позволяет создать новый приоритет.
Требует параметр `priority : Priority `.
Возвращает созданный приоритет.

- `/edit` - позволяет отредактировать приоритет.
Требует параметр `priority : Priority `.
Возвращает отредактированный приоритет.

- `/delete` - позволяет удалить приоритет.
Требует параметр `id : int`.
Возвращает удаленную задачу.

## Пользователи `/users`
Раздел api доступен только администраторам.
### Get-запросы
- `/` - позволяет получить список пользователей с их задачами.
- `/details` - позволяет получить информацию о пользователе.
Требует параметр `id : string`.
### Post-запросы
- `/create` - позволяет зарегистрировать нового пользователя в системе. 
Требует параметры `UserName : string`, `Email : string`, `Password : string`, `ConfirmPassword : string` и опциональный параметр `IsSuperUser : bool`.
Возвращает данные о созданном пользователе.

- `/edit` - позволяет отредактировать данные о пользователе.
Требует параметры `Id : string`, `UserName : string`, `Email : string`, `Password : string`, `ConfirmPassword : string` и опциональный параметр `IsSuperUser : bool`.
Возвращает данные о созданном пользователе.

- `/delete` - позволяет удалить пользователя.
Требует параметр `id : string`.
Возвращает удаленного пользователя.

# Классы моделей
## Task
 - `int Id`
 - `string Title`
 - `string? Description`
 - `bool IsCompleted`
 - `DateTime? DueDate`
 - `int Priority [= 0]`
 - `string User`
 
## Priority
- `int Id`
- `int Level`

## User
- Поля, унаследованные из `IdentityUser`
- `List<ToDoItem>? ToDoItems`

# Перечисления
## TaskStatusFilterEnum
- `Ongoing`
- `Completed`

## TasksSorterEnum
- `Default`
- `Name`
- `Status`
- `Priority`
- `User` (доступно только администраторам)
